<% if  @writing.present? %>
  <div class="modal fade" id="chaptersModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content" style="max-height: 70vh;">
        <div class="modal-header">
          <h5 class="modal-title">สารบัญ <%= @writing.chapters.size %> ตอน</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body p-0">
          <div class="list-group list-group-flush">
            <% @writing.chapters.order(position: :asc).each_with_index do |chapter, index| %>
              <%= link_to writing_chapter_path(chapter.writing, chapter),
          class: [
            "list-group-item",
            "list-group-item-action",
            "d-flex justify-content-between align-items-center",
            ("active" if chapter == @chapter)
          ].compact.join(" ") do %>
                <span>
                  <span class="me-2 <%= 'fw-semibold' if chapter == @chapter %>">
                    ตอนที่ <%= index + 1 %>
                  </span>
                  <%= chapter.title %>
                </span>
                <% if chapter == @chapter %>
                  <i class="bi bi-bookmark-fill"></i>
                <% else %>
                  <i class="bi bi-chevron-right text-muted"></i>
                <% end %>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
<% end %>
