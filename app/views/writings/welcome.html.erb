<%# 1. Outer Carousel Wrapper %>
<div id="heroCarousel" class="carousel slide" data-bs-ride="carousel">
  <%# 2. Indicators (The small dots at the bottom) %>
  <div class="carousel-indicators">
    <% @writings.each_with_index do |writing, index| %>
      <button type="button" 
              data-bs-target="#heroCarousel" 
              data-bs-slide-to="<%= index %>" 
              class="<%= 'active' if index == 0 %>" 
              aria-current="<%= 'true' if index == 0 %>" 
              aria-label="Slide <%= index + 1 %>">
      </button>
    <% end %>
  </div>
  <%# 3. Inner Carousel Content %>
  <div class="carousel-inner">
    <% @writings.each_with_index do |writing, index| %>
      <%# Each item represents one "page" %>
      <div class="carousel-item <%= 'active' if index == 0 %>">
        <% if writing.cover.attached? %>
          <%= image_tag writing.cover,
      class: "d-block w-100",
      style: "height:300px; object-fit:cover;" %>
        <% else %>
          <div class="d-block w-100 bg-secondary"
         style="height:300px; object-fit:cover;">
          </div>
        <% end %>
        <div class="carousel-caption d-none d-md-block">
          <h5 class="bg-black bg-opacity-50 p-2">
            <%= writing.title %>
          </h5>
          <%= link_to "Read More",
                writing,
                class: "btn btn-lg btn-warning" %>
        </div>
      </div>
    <% end %>
  </div>
  <%# 4. Previous/Next Controls %>
  <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>
<div class="container py-4">
  <h3 class="mb-3">นิยายกำลังภายใน</h3>
  <div class="d-flex gap-3 overflow-auto pb-3">
    <% Writing.all.limit(10).each do |writing| %>
      <div class="card flex-shrink-0" style="width: 200px;">
        <%= image_tag(
      writing.cover.attached? ? url_for(writing.cover) : "default_cover.png",
      size: "200x200",
      class: "rounded"
    ) %>
        <div class="card-body">
          <h6 class="card-title text-truncate">
            <%= link_to writing.title, readerview_writing_path(writing) %>
          </h6>
          <p class="text-muted small mb-0"><%= writing.user.email %></p>
          <p class="text-muted small mt-1 mb-0">
            <i class="bi bi-journal-text"></i>
            <%= pluralize(writing.chapters.count, "chapter") %>
          </p>
        </div>
      </div>
    <% end %>
  </div>
</div>
